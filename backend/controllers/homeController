const fs = require("fs").promises;
const path = require("path");
const { getCoverPhoto, getFolderNames } = require("../helpers/helperFunctions");

exports.getmain = async (req, res) => {
	// Define the paths to the directories
	const coverDirectoryPath = "./frontend/public/assets/photos/cover/";
	const picturesDirectoryPath = "./frontend/public/assets/photos/pictures/";

	try {
		const coverImageName = await getCoverPhoto(coverDirectoryPath);

		let folderContents = await getFolderNames(picturesDirectoryPath);

		res.render("index", {
			coverImageName,
			folderContents,
		});
	} catch (err) {
		console.error("Error:", err);
		res.status(500).send(
			"An error occurred while reading the directories."
		);
	}
};
